<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Data</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="background-color:  rgb(1, 19, 17);">
    <div class="ebody">
        <nav class="nav">
            <div class="boxx">
                <button id="menu-toggle">&#9776</button>
                <ul>
                    <li><button class="encrypt-btn"><a href="encryption.html">Encryption</a></button></li>
                    <li><button class="decrypt-btn"><a href="dycription.html"> Decryption</a></button></li>
                    <li><button class="auto-crypt-btn"><a href="auto.html"> Auto Crypt</a></button></li>
                    <li><button class="search-btn"><a href="Search.html"> Search</a></button></li>
                    <li><button class="modify-btn"><a href="modify.html"> Modify</a></button></li>
                    <li><button class="delete-btn"><a href="delete.html"> Delete</a></a></button></li>
                </ul>
            </div>
        </nav>

    <div class="container2">
        <div class="card">
            <h3>Search Data</h3>
            <input type="text" id="searchInput" placeholder="Enter File Name">
            <button onclick="searchData()">Search</button>
        </div>
        <form id="searchData">

            <div class="input2">
                <h3>key</h3>
                <input type="text" id="key" name="" placeholder="Enter your key">
                <button type="button" onclick="decryptedData()">Decrypt</button>
                <div class="result">
                    <h3 id="heading"></h3>
                    <p id="searchResult"></p>
                    <div>
                        <p id="heading1"></p></div>
                       <div> <p id="result"></p></div>
                </div>

            </div>
        </form>

       
    </div>

    <script>
        
document.getElementById('menu-toggle').addEventListener('click', function() {
    var menu = document.querySelector('.nav ul');
    if (menu.style.display === 'none') {
        menu.style.display = 'block';
    } else {
        menu.style.display = 'none';
    }
});


       function searchData() {
    var searchInput = document.getElementById("searchInput").value;
    var key = parseInt(document.getElementById("key").value);
    var decryptedData = "";
    var users = JSON.parse(localStorage.getItem("users")) || [];
    var found = false;

    users.forEach(function(user) {

        if (user.filename === searchInput) {
            var dataa= document.getElementById("heading").innerText = "Data found: ";
            var dataa= document.getElementById("searchResult").innerText = user.data;
            var dataa = user.data;

            for (var i = 0; i < dataa.length; i++) {
                decryptedData += String.fromCharCode(dataa.charCodeAt(i) - key);
            }

            document.getElementById("heading1").innerHTML = "Decrypted Data :";
            document.getElementById("result").innerHTML = decryptedData;

            found = true;
        }
    });

    if (!found) {
        document.getElementById("searchResult").innerText = "No data found for the given file name.";
        document.getElementById("heading1").innerHTML = "";
        document.getElementById("result").innerHTML = "";
    }
}
function decryptedData(){
    searchData();
}
    </script>
</body>
</html>
